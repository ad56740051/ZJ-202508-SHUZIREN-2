# 本地EdgeTTS数字人系统 - 快速启动指南

## 🚀 一键启动

### 第一步：安装依赖
```bash
install_local_tts.bat
```

### 第二步：启动系统
```bash
2.webui_local_tts.bat
```

### 第三步：访问系统
打开浏览器访问：`http://localhost:8010`

## 📋 详细步骤

### 1. 环境准备
- 确保已安装Python 3.7+
- 确保有足够的磁盘空间（至少1GB）
- 首次运行需要联网下载模型

### 2. 安装依赖
运行安装脚本会自动：
- 安装edge-tts库
- 安装其他必要依赖
- 运行功能测试
- 验证系统完整性

### 3. 启动系统
启动脚本会自动：
- 加载本地EdgeTTS
- 初始化数字人模型
- 启动Web服务器
- 显示访问地址

### 4. 使用系统
- 在浏览器中与春儿对话
- 支持文本输入和语音输入
- 支持表演命令（如"春儿表演"）
- 支持醒来命令（如"春儿醒来"）

## ⚙️ 配置选项

### 修改语音
编辑 `local_tts_config.json`：
```json
{
    "character_settings": {
        "chuner_voice": "zh-CN-XiaoxiaoNeural"
    }
}
```

### 可用语音列表
- `zh-CN-XiaoxiaoNeural` - 晓晓（默认）
- `zh-CN-YunxiNeural` - 云希（男声）
- `zh-CN-XiaoyiNeural` - 晓伊
- `zh-CN-YunjianNeural` - 云健（男声）

### 修改头像
修改启动脚本中的 `--avatar_id` 参数：
```bash
python app.py --avatar_id avatar11 --tts local_edgetts
```

## 🔧 故障排除

### 安装失败
```bash
# 手动安装依赖
pip install edge-tts soundfile resampy numpy

# 使用国内镜像
pip install -i https://pypi.tuna.tsinghua.edu.cn/simple edge-tts
```

### 启动失败
```bash
# 检查端口占用
netstat -ano | findstr :8010

# 使用不同端口
python app.py --listenport 8011 --tts local_edgetts
```

### 语音问题
```bash
# 运行测试脚本
python test_local_tts.py

# 检查配置文件
cat local_tts_config.json
```

## 📞 技术支持

如果遇到问题：
1. 查看控制台错误信息
2. 运行测试脚本检查功能
3. 检查配置文件设置
4. 查看详细文档：`本地EdgeTTS使用说明.md`

## 🎯 功能特点

- ✅ **完全离线**：无需联网，保护隐私
- ✅ **高质量语音**：支持多种中文语音
- ✅ **低延迟**：本地处理，响应速度快
- ✅ **智能对话**：基于大语言模型的智能回复
- ✅ **表演功能**：支持乐器演奏等表演
- ✅ **实时交互**：WebRTC低延迟传输

## 📝 使用示例

### 基本对话
```
用户：你好，春儿
春儿：爸爸，你好！我是春儿，很高兴见到你！
```

### 表演命令
```
用户：春儿表演
春儿：好的爸爸，我这就为您表演节目。
[播放琵琶演奏视频]
```

### 醒来命令
```
用户：春儿醒来
春儿：[播放醒来动画] 爸爸，我在呢，有什么事？
```

## 🎉 开始使用

现在您可以享受完全离线的数字人体验了！

记住：
- 首次启动可能需要几分钟下载模型
- 建议使用Chrome或Edge浏览器
- 确保麦克风权限已开启（如需语音输入）

